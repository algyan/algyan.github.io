<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>

    {% if site.google_analytics %}
      <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}');
      </script>
    {% endif %}
    <meta charset="UTF-8">

{% seo %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  </head>
  <body>
    <!-- <a id="skip-to-content" href="#content">Skip to the content.</a> -->

    <header class="page-header" role="banner">
      <h1 class="project-name">{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
      <h2 class="project-tagline">{{ page.description | default: site.description | default: site.github.project_tagline }}</h2>
      <img src="/img/algyan.jpg" width="90%"><br>
      {% if site.github.is_project_page %}
        <a href="{{ site.github.repository_url }}" class="btn">View on GitHub</a>
      {% endif %}
      {% if site.show_downloads %}
        <a href="{{ site.github.zip_url }}" class="btn">Download .zip</a>
        <a href="{{ site.github.tar_url }}" class="btn">Download .tar.gz</a>
      {% endif %}
    </header>

    <main id="content" class="main-content" role="main">
      {{ content }}

      <footer class="site-footer">
        {% if site.github.is_project_page %}
          <span class="site-footer-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span>
        {% endif %}
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
<script src="assets/jquery-3.5.1.min.js"></script>
<script>
  $(function() {
    // connpassイベント表示用のテーブルが存在するページの場合
    if ($('#event_list').length > 0) {
      // 現在の年月を取得
      let d = new Date();
      let year = d.getFullYear();
      let month = d.getMonth() + 1;
      // 来月の年月を設定
      let nextYear = month === 12 ? year + 1 : year;
      let nextMonth = month === 12 ? 1 : month;
      // クエリ文字列に変換
      let ym1 = year.toString() + month.toString().padStart(2, '0');
      let ym2 = year.toString() + month.toString().padStart(2, '0');
      // connpasイベント取得URL
      let url = "https://connpass.com/api/v1/event/?series_id=1561&order=2&ym=" + ym1 + "&ym=" + ym2 + "&callback=event_list_init";
      let scr = document.createElement('script');
      scr.src = url;
      $('body').append(scr);
    }
  });
  function event_list_init(data) {
    data.events.forEach(function(event) {
      let event_date = event.started_at;
      let dateStr = event_date.substring(0, event_date.indexOf('T'));
      dateStr = dateStr.replace(/-/gi, '/');
      event_date = Date.parse(event_date);
      if (event_date > new Date()) {
        $('#event_list').prepend('<tr><td>' + dateStr + '</td><td><a href="' + event.event_url + '" style="word-break:normal;" target="_blank">' + event.title + '</a></td></tr>');
      }
    });
  }
</script>
</html>
